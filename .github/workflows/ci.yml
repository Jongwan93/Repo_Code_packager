# 워크플로우 이름
name: Python Project CI

# 언제 실행할지
on:
  push:
    branches: [ "main" ] # main 브랜치에 push 할 때
  pull_request:
    branches: [ "main" ] # main 브랜치로 PR 보낼 때

# 무슨 작업을 할지
jobs:
  build-and-test:
    # 우분투 최신 버전에서 실행
    runs-on: ubuntu-latest

    steps:
      # 1. 내 코드를 가상 머신으로 가져오기
      - name: Check out repository code
        uses: actions/checkout@v4

      # 2. Python 3.11 버전 설치 (tomllib 때문에)
      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      # 3. 필요한 라이브러리 설치 (네가 만든 requirements.txt 사용)
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # 4. 테스트 실행! (네가 만든 tests 폴더를 pytest가 알아서 찾음)
      - name: Run tests with pytest
        run: |
          pytest